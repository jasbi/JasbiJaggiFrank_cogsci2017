---
title: "Rapid Acquisition of Disjunction from Prosody and Consistency"
bibliography: library.bib
csl: apa6.csl
document-params: "10pt, letterpaper"

author-information: > 
    \author{{\large \bf Masoud Jasbi} \\ \texttt{masoudj@stanford.edu} \\ Department of Linguistics \\ Stanford University
    \And {\large \bf Akshay Jaggi} \\ \texttt{ajaggi@stanford.edu} \\ Department of Linguistics \\ Stanford University
    \And {\large \bf Michael C. Frank} \\ \texttt{mcfrank@stanford.edu} \\ Department of Psychology \\ Stanford University
    }

abstract: 
    "Ambiguity poses a challenge to children learning the meaning of words. For example, a disjunction such as `A or B` can be interpreted as inclusive (A or B, or both) or exclusive (A or B, not both). Linguistic studies suggest that the core meaning of *or* is inclusive and despite the dominance of exclusive interpretations, children successfully and quickly learn the meaning of *or* as inclusive. This raises a larning puzzle: how can children quickly learn what they rarely hear? We argue that children can use the regularities of *or* in child-directed speech to learn the interpretation of a disjunction from a few examples."
    
keywords:
    "language acquisition; word learning; logical words; and; or; nativism; constructivism."
    
output: cogsci2016::cogsci_paper
---

```{r global_options, include=FALSE}
rm(list=ls())
knitr::opts_chunk$set(fig.width=3, fig.height=3, fig.crop = F, fig.pos = "tb", fig.path='figs/',
                      echo=F, warning=F, cache=F, message=F, sanitize = T)
```

```{r, libraries}
library(png)
library(grid)
library(ggplot2)
library(xtable)
library(knitr)
library(childesr)
library(tidyverse)
library(ggthemes)
library(lubridate)
library(magrittr)
library(tidyboot)
library(lme4)
library(lmerTest)
```

# Introduction

The social media company LADbible reported the following in a tweet: "James Bond producer says next 007 could be black **or** a woman". A twitter user named Robert responded sarcastically with: "if only women could be black!" What in the producer's speech gave the impression that the next 007 could not be both black **and** a woman? The word *or*. A disjunction like "A or B" is associated with two interpretations: **inclusive**, and **exclusive**. "A or B" is inclusive when it is interpreted as "A or B **or both**". This is probably what LADbible meant when reporting the James Bond producer. However, "A or B" can also be exclusive: "A or B, but **not both**". Robert's response shows that he had an exclusive interpration of *or*. What factors determine the interpretation of *or* and how do children learn its meaning given this ambiguity?

A large body of research in linguistics and philosophy in the past 50 years has created a common consensus on the meaning of *or* (see @Aloni2016). Data on the interpretation of disjunction across different sentences, contexts, and even languages show that the core meaning of disjunction words such as *or* is **inclusive**. This is similar to the definition of disjunction in formal logics. The **exclusive** interpretation of *or* is the result of enhancing its inclusive semantics via other (extra-semantic) factors such as intonation [@pruitt2013interpretation], inconsistency of the options [@geurts2006exclusive], and pragmatic reasoning over the speaker's choice of *or* instead of *and* [@grice1975logicconvo]. Therefore, interpreting a disjunciton is a complex process that needs to take into account the meaning of *or* as well as different structural and contextual factors that accompany it. How do we, as children, learn such a complex interpretive system?

There are two accounts of children's acquisition of disjunciton: a **constructivist** account, and 2. a **nativist** account. Under the constructivist account, children learn the meaning of *or* by paying attention to how parents use it in different contexts. They form usage-rules and expand their usage repertoire as they grow up. The prediction is that children's production of *or* is slow and gradual, mirroring what they hear from parents. @morris2008logically found that *and* is about 13 times more frequent than *or* in parents' speech to children.  As predicted by the constructivist account, @morris2008logically reported that children also learn to produce *and* much more quickly than *or*. They reach the adult rate of *and* at age 3 while for *or* there is a gradual increase in production, possibly reaching the adult level at ages 5 or 6. The faster acquisition of *and* is consistent with the constructivist theory that emphasizes the role of usage frequency in children's linguistic development. @morris2008logically also reported that the majority of *or* examples children hear are exclusive. He argued that consistent with the constructivist account, the majority of *or*'s children produce are also exclusive. Therefore, the inclusive semantics of *or* is developed after the exclusive interpretation.

However, several comprehension studies of *or* in different linguistic contexts show that children as young as three-years old interpret *or* as inclusive disjunction [@crain2012emergence]. This is surprising given @morris2008logically's finding that the majority of *or* examples children hear are exclusive. How do children learn the interpretation of disjunction as inclusive if they rarely hear it? We call this the **learning puzzle of disjunction**. @crain2012emergence suggests that instead of learning from the parents' usage of *or*, children rely on the innate knowledge that the the disjunciton operator in their native language must have an inclusive meaning. This nativist account predicts that *or* is learned relatively quickly and accurately by children.

Here we present an alternative answer that provides a synthesis between the nativist and constructivist accounts. We show that children can use regularities in parents' usage of *or* to learn the interpretation of disjunction from a handful of examples. In study 1, we use a large scale corpus study of parents and children's speech to show that both *and* and *or* appear relatively quickly in children's speech and reach the adult rate by the age 4. This finding is consistent with the comprehension studies that show children have an adult-like understanding of these words by the age four. In study 2, we replicate @morris2008logically's finding that the majority of *or* examples in child-directed speech have an exclusive interpretation. However, we also show that these exclusive interpretations correlate systematically with two factors external to *or*: intonation and consistency of the options. Exclusive interpretations are either inconsistent in nature (e.g. clean or dirty) or carry a distinct rise-fall intonation. We show that setting aside these cases, the interpretation of a disjunction is inclusive.

We argue that if children track the interpretive cues that accompany a disjunction, they can tease apart the role of the word *or* from factors that accompany and enhance it to shape the exclusive interpretation. This way children can discover that exclusivity corrleates with rise-fall intonation and inconsistent options, while *or* itself does not exclude the option of both disjuncts being true. We implement this novel account in a decision-tree that correctly learns to predict the interpretation of a disjunction with 80% accuracy after only a few examples. Our results show that the richness and systematicity of children's linguistic input allows rapid acquisition of disjunction with no need for an innate assumptions specific to the meaning of disjunction. We discuss the important implications of this work for the theories of word learning in the last section.

# Study 1: Corpus Study

First, we conducted an exploratory and large scale investigation of *and* and *or* productions in parents and children. The goal of the study was to find out when children start producing these words and when they reach the adult rate of production. We conclude that children start producing *and* around 1.5 or 2 years of age, and *or* between the ages of 2 and 3. They reach the adult rate of production for *and* around 3 and for *or* around 4 or possibly earlier.

## Methods

```{r, childesdbImports, eval=FALSE, include=FALSE}
# This chunk uses the childesr package to import all English words from childes-db and create the processed files "raw_normalized" and "bySpeechAct_normalized"
# Since the file is too big, we only store two dataframes on github that are the results of running this chunk of code

# Import all words from childes-db
english_tokens <- get_tokens(collection = c("Eng-NA","Eng-UK"), 
                          corpus = NULL, 
                          role = c("target_child","Mother", "Father"),
                          age = NULL, 
                          sex = NULL, 
                          child = NULL,
                          token = "*")

#Convert and store children's age in years using the lubridate package
english_tokens$target_child_age_years <- 
  english_tokens$target_child_age %>% 
  duration("days") %>% 
  as.numeric("years")

#Take out data for the age range below 1 and above 6 years, this is because there is not much data in that range
english_tokens %<>% filter(target_child_age_years < 6, target_child_age_years > 1)

# Prepare the speech_act categories for this study based on the utterance_types in childes-db
# Categories: declarative, impertaive, question, and other
english_tokens$speech_act <-
  recode(english_tokens$utterance_type, 
         `broken for coding`="other",
          `imperative_emphatic` = "imperative",
         interruption = "other",
         `interruption question` = "question",
         `missing CA terminator` = "other",
         `no break TCU continuation` = "other",
         `question exclamation` = "question",
         `quotation next line` = "other",
         `quotation precedes` = "other",
         `self interruption` = "other",
         `self interruption question` = "question",
         `trail off` = "other",
         `trail off question` = "question"
         )

#####################################################################
## Now we're going to process the English words we have in "english_tokens" in two ways

######## 1. Just count all the instances of "and" and "or" and normalize them by the total number of words a speaker has said at a particular age (of the child)

# Group the tokens (words) by speaker role and the age of the child, count how many words for each speaker at each age
rawOverall_stats <-
  english_tokens %>%
  group_by(speaker_role, target_child_age_years) %>%
  summarize(total_freq = n())

# Group connective tokens by speaker and age of the child. count how many connective for each speaker at each age
rawConnective_stats <-
  english_tokens %>%
  filter(gloss=="and" | gloss=="or") %>%
  group_by(speaker_role, target_child_age_years, gloss) %>%
  summarize(freq = n())

# Normalize the connective count by dividing the connective frequency by the total word frequency for each speaker at each age
rawNormalized_stats <-
  full_join(rawConnective_stats, rawOverall_stats, by=c("speaker_role", "target_child_age_years")) %>%
  mutate(relFreq = freq / total_freq, relFreq_ppt = relFreq * 1000)

########## 2. Count all the instaces of "and" and "or" in DIFFERENT SPEECH ACTS and normalize them by THE TOTAL NUMBER OF WORDS IN SPEECH ACTS for each speaker at a particular age

#group the tokesn by speaker, age, and speech act, then count them
overall_stats <-
  english_tokens %>%
  group_by(speaker_role, speech_act, target_child_age_years) %>%
  summarize(total_freq = n())

# only take out "and" and "or"s, group them by speaker, age of the child, and speech act, count them
connective_stats <-
  english_tokens %>%
  filter(gloss=="and" | gloss=="or") %>%
  group_by(speech_act, speaker_role, target_child_age_years, gloss) %>%
  summarize(freq = n())

# now join the previous data frames together, divide the number of tokens in each group by the total number of words in that group
normalized_stats <-
  full_join(connective_stats, overall_stats, by=c("speech_act", "speaker_role", "target_child_age_years")) %>%
  mutate(relFreq = freq / total_freq, relFreq_ppt = relFreq * 1000)

########## Store both dataframes to be called later
write.csv(rawNormalized_stats, "2_processed_data/raw_normalized.csv")
write.csv(normalized_stats, "2_processed_data/bySpeechAct_normalized.csv")
```

We accessed the Child Language Data Exchange System ([CHILDES](https://childes.talkbank.org/), @macwhinney2000childes) via the online platform [childes-db](http://childes-db.stanford.edu/) and its associated R package childesr [@childesdb]. We extracted all instances of *and* and *or* from the English corpora (ENG-NA and ENG-UK). We limited our analysis to the data between one and six years because there is scarce data outside this age range. We computated the relative frequency of connective production by dividing the total number of *and*/*or* in the speech of fathers, mothers, and children at a particular age by the total number of words spoken at that age. We present the relative frequency as parts per thousand.

## Results

```{r importProcessedData}
rawNormalized <- read.csv("2_processed_data/raw_normalized.csv")
bySpeechAct_normalized <- read.csv("2_processed_data/bySpeechAct_normalized.csv")
```

In figure 1, we show the relative frequencies of *and* and *or* in the speech of parents and children between one and six years. It is important to note that the y-axes for *and* vs. *or* show different ranges. This is due to the big difference in the relative frequencies of *and* and *or*. In the speech of parents, *and* is produced around 20 times per thousand words while *or* is only produced around 2 times per thousand words. This confirms previous findings that *or* is much less frequent in child directed speech than a similar funciton word such as *and*.

```{r OverallConnectivePlots, fig.env="figure", fig.asp=0.7, fig.width=3.3, fig.show="hold", fig.pos="H", fig.cap= "The relative frequency of AND (top) and OR (bottom) per thousand words in the speech of fathers, mothers, and children between the ages of 1 and 6."}
rawNormalized %>%
  filter(gloss=="and") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape = speaker_role, color=speaker_role)) +
  geom_point(aes(), size=0.6) +
#  facet_grid(gloss, scales="free_y") +
  scale_y_continuous(limits = c(0, 75)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "", y="ANDs Per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) +
  theme_few() +
  theme(legend.position=c(0.9, 0.8), text = element_text(size=9)) + 
  guides(shape=guide_legend(title=NULL), color=guide_legend(title=NULL))

rawNormalized %>%
  filter(gloss=="or") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape = speaker_role, color=speaker_role)) +
  geom_point(aes(), size=0.6) +
#  facet_grid(speech_act~gloss, scales="free_y") +
  scale_y_continuous(limits = c(0, 8)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "Child's Age (years)", y="ORs per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(legend.position=c(0.9, 0.8), text = element_text(size=9))+ 
  guides(shape=FALSE, color=FALSE)
```

*And* and *or* seem to show different developmental trajectories in the speech of children. For *and*, there is a rapid increase in its production between the ages of 1.5 and 3 before it reaches the adult rate around the age 3 and stay at that level until the age 6. For *or*, on the other hand, we see a slow incrase from the age 2 until the age 6 when it reaches the adult rate. This difference in the development of *and* & *or* production was attributed to the frequency of these items in child-directed speech. Since *and* is much more frequent than *or*, it is learned much faster than *or*. @morris2008logically argued that such patterns support the item-based and usage-based acquisition of logical words.

However, the analysis above does not control for other factors that can affect the production of words by children. An important factor to control for is the development of speech acts. While content words such as *dog* or *chair* may appear freely in different types of speech acts, function words are highly constrained by the type of speech acts they can appear in. For example, it is reasoable to assume that question words such as *how* and *why* are much more likey to occur in questions than statements (declaratives). If parent-child interaction is such that parents ask more questions than children, it is not surprising to find higher rates of *how* and *why* production in parents than children. Therefore, it is important to control for the speech act a function word appears in.

Figure 2 shows the relative frequencies of *and* and *or* in questions vs. declaratives, in the speech of parents and children between one and six years. Here, the relative frequency is computed by dividing the total number of *and*/*or* in a question/declarative in the speech of fathers, mothers, and children at a particular age, by the total number of words in a question/declarative spoken at that age. As before, we present the relative frequency as parts per thousand.

```{r byspeechActPlots, fig.env="figure", fig.asp=1, fig.width=3.3, fig.show="hold", fig.pos="H", fig.cap= "The relative frequency of AND (top) and OR (bottom) per thousand words in delcaratives and questions in the speech of fathers, mothers, and children between the ages of 1 and 6,"}
bySpeechAct_normalized %>%
  filter(speech_act == "declarative" | speech_act == "question", gloss=="and") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape=speaker_role, color = speaker_role)) +
  geom_point(aes(color=speaker_role), size=0.6) +
  facet_grid(speech_act~gloss, scales="free_y") +
  scale_y_continuous(limits = c(0, 60)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "", y="Per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(text = element_text(size=9)) + 
  guides(shape=FALSE, color=FALSE)

bySpeechAct_normalized %>%
  filter(gloss=="or", speech_act == "declarative" | speech_act == "question") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape=speaker_role, color = speaker_role)) +
  geom_point(aes(color=speaker_role), size=0.6) +
  facet_grid(speech_act~gloss, scales="free_y") +
  scale_y_continuous(limits = c(0,7)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "Age (years)", y="Per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(text = element_text(size=9)) + 
  guides(shape=FALSE, color=FALSE)
```

The results show similar developmental trajectories for the production of *and* and *or* in children. For both words, there is a relatively rapid incease in their frequency between the ages of 2 and 4 before reaching the parent rate at the age of 4 and staying at that rate until the age of 6. This pattern of production is consistent with the nativist observations that the acquisition of *and* and *or* is rapid and that children have an adult-like comprehension of these two connectives at the age 4. 

## Summary

In this study we showed that *and* is a lot more frequent than *or* in child directed speech.

In the first six years, it appears that children reach the adult production rate for and but not or.

This is at least partly because or is more frequent in questions and children produce fewer questions than parents.

The developmental trajectory of connective production is best described as a quick increase in production between the ages of 2 and 4 and staying around the parents' rate between the ages 4 and 6. This is compatible with the comprehension studies which suggest children understand *and* and *or* by the age four. 

```{r warmup, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(ggthemes)
library(bootstrap)
library(forcats)
library (irr)
library(caret)
library(lme4)
library(lmerTest)
library(knitr)
library(ggplot2)

## for bootstrapping 95% confidence intervals
theta <- function(x,xdata) {mean(xdata[x])}
ci.low <- function(x) {
  quantile(bootstrap(1:length(x),1000,theta,x)$thetastar,.025)}
ci.high <- function(x) {
  quantile(bootstrap(1:length(x),1000,theta,x)$thetastar,.975)}
```

```{r data_prep, echo=FALSE, warning=FALSE, message=FALSE}
alex_data <- read.csv("1_raw_data/ProvidenceData-alex.csv", nrows=100)
lily_data <- read.csv("1_raw_data/ProvidenceData-lily.csv", nrows=99)
vio_data <- read.csv("1_raw_data/ProvidenceData-vio.csv", nrows=102)
will_data <- read.csv("1_raw_data/ProvidenceData-will.csv", nrows=100)
naima_data <- read.csv("1_raw_data/ProvidenceOR-Naima.csv", nrows=241)

naima_data <- 
  naima_data %>%
  filter(!is.na(exclusivity), !is.na(intonation))

all_data <- rbind(alex_data, lily_data, vio_data, will_data, naima_data)

all_data$intonation <- as.factor(all_data$intonation)

#all_data$consistency <- fct_recode(all_data$exclusion, "Consistent" = "ELS", "Inconsistent" = "EXC")
all_data$intonation <- fct_recode(all_data$intonation, "Flat" = "0", "Rising" = "1", "Rise-Fall" = "2")
```

# Study 2: Annotation Study

Second, we conducted an detailed and small-scale investigation of *or* productions in parents and children. The goal of the study was to find out how children learn the meaning of *or* from such little data. We conclude that children hear significantly more exclusive *or* supporting @morris2008logically's findings. Additionally, we find that the exclusive uses of *or* are rich in structures that index the exclusive interpretation. These indicative structures include specifically intonation and consistency of the disjuncts. Exclusive interpretations are either inconsistent in nature (e.g. clean or dirty) or carry a distinct rise-fall intonation. We then show that a decision tree model can learn to accurately (>80%) predict exclusivity using this information after seeing few (<20) examples. 

## Methods 

We accessed the Providence corpus via CHILDES [@demuth2006word]. We extracted all instances of *or* along with the two utterances before and after the utterance containing *or*. We annotated the examples for four major categories. 
*Exclusivity Interpretation*: This category represents the goal task: understanding the intended form of disjunction. 
*Intonation*: This category was divided into three main intonation patterns over the disjuncts. Intonation could be flat, rising overall, or rise-fall. These three categories were selected because rise-fall in particular has been shown to lead to an exclusive interpretation of the disjunction [@pruitt2011disjunctive]. 
*Consistency*: This category tracked the logical consistency of the disjuncts. Two disjuncts were marked as inconsistent if replacing the word "or" with "and" produced a logical conflict. For example in “Are your feet clean or dirty?”, the disjuncts are inconsistent: the addresee’s feet cannot be both clean and dirty.

Two raters annotated the same 240 utterances to develop a reliability score. The interrater reliability was calculated over 8 iterations of 30 examples. Training only completed after 3 consecutive iterations with reliability over 0.7 for all categories.

```{r data_wrangling, echo=FALSE, warning=FALSE, message=FALSE}
raw_data <- 
  all_data %>%
  group_by(id, exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = IN + EX) %>%
  gather(EXIN, counts, EX:IN) %>%
  mutate(prop = counts / total) %>%
  group_by(EXIN) %>%
  summarize(cih = ci.high(prop),
            cil = ci.low(prop),
            prop = mean(prop))

graph_data <- 
  all_data %>%
  group_by(id, intonation, exclusion, exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = EX + IN) %>%
  gather(exclusivity, counts, EX:IN) %>%
  mutate(prop = counts / total) %>%
  group_by(exclusivity, intonation, exclusion) %>%
  summarize(cih = ci.high(prop),
            cil = ci.low(prop),
            prop = mean(prop)) 

counts_table<-  
  all_data %>%
  group_by(intonation, exclusion, syn_level, exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = IN + EX)

exclusivity_overall <-
  all_data %>%
  group_by(exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = IN + EX) %>%
  gather(exclusivity, counts, EX:IN) %>%
  mutate(prop = counts / total)

cds_disjunction_model <- summary(glmer(exclusivity ~ intonation + exclusion  + syn_level + (1|id), family="binomial", data=all_data))
```

## Results 

First, similar to Morris (2008), we found that the majority of *or* examples in CDS receive an exclusive interpretation ($\sim$%`r 100 * round(exclusivity_overall$prop[1],2)`). Figure 3 shows this difference in distribution. However, the rate of exclusive interpretations change systematically when we break the data down by prosody and consistency (figure below). A mixed-effects binomial logistic regression with the fixed effects of intonation, consistency, and random effects for children found intonation and consistency significant in interpreting disjunctions. Disjunctions were more likely to be interpreted as exlclusive if they received a rise-fall intonation ($\beta$=`r round(cds_disjunction_model$coefficients[3],2)`, $z$=`r round(cds_disjunction_model$coefficients[11],2)`, $p < 0.001$) or if they were inconsistent($\beta$=`r round(cds_disjunction_model$coefficients[4],2)`, $z$=`r round(cds_disjunction_model$coefficients[12],2)`, $p < 0.001$). Disjunctions were more likely to be interpreted as inclusive if they were consistent and received a rising intonation ($\beta$=`r round(cds_disjunction_model$coefficients[2],2)`, $z$=`r round(cds_disjunction_model$coefficients[10],2)`, $p < 0.001$) or flat intonation ($\beta$=`r round(cds_disjunction_model$coefficients[1],2)`, $z$=`r round(cds_disjunction_model$coefficients[9],2)`, $p < 0.001$).

```{r interpretation, fig.env='figure',fig.width=2, fig.height=2, fig.show='hold',set.cap.width=T, num.cols.cap=2, fig.align="center",fig.cap = "Distribution of exclusive and inclusive interpretations broken down by intonation and consistency. Error bars represent bootstrapped 95\\% confidence intervals"}
ggplot(raw_data, aes(x= EXIN, y=prop, fill=EXIN)) + 
  theme_few(base_size = 10) + 
  geom_col(width=0.7) +
  geom_linerange(aes(ymax = cih, ymin = cil)) + 
  guides(fill=FALSE) +
  labs(title = "", x = "", y = "") + 
  scale_colour_solarized()
```
Figure 4 demonstrates the clear relationship between exclusive interpretation,  rise-fall intonation, and inconsistent disjuncts. Without these markers of exclusivity, the inclusive interpretations remain. This supports @crain2012emergence's claim that the "default" interpretation of "or" is inclusive. 

```{r interpretationByIntonationAndConsistency, fig.env='figure*',fig.pos='h',fig.width=4.5, fig.height=3, fig.align="center",fig.show='hold',set.cap.width=T, num.cols.cap=2, fig.cap = "Distribution of exclusive and inclusive interpretations broken down by intonation and consistency. Error bars represent bootstrapped 95\\% confidence intervals"}
ggplot(graph_data, aes(x= exclusivity, y=prop, fill=exclusivity)) + 
  geom_col(width=0.7) +
  geom_linerange(aes(ymax = cih, ymin = cil)) +
  guides(fill=FALSE) +
  theme_few(base_size = 10) + 
  labs(title = "", x = "", y = "") + 
  scale_colour_solarized() + facet_grid(exclusion~intonation)
```

Next, using Sci-kit Learn's Decision Tree Module [@pedregosa2011scikit], we built a predictive model to train on annotated *or* utterances and predict the exclusivity of unseen *or* utterances (annotated for intonation and consistency). Averaged over 100 trials and training on 200 examples, the average accuracy of a binary tree was 83%. More remarkably, the tree achieved an average of 80% accuracy after training on only 20 examples. The success of such a simple tree indicates that children could use a simple model to rapidly learn the exclusive interpretation of *or* from little data. 

```{r learningCurve, fig.env = "figure", fig.pos = 'h', fig.align='center', fig.width=5, fig.height=2.5,fig.cap="Decision Tree Accuracy as a function of number of examples seen"}
learning_curve <- png::readPNG('figs/learning_curve.png')
grid::grid.raster(learning_curve)
```


## Summary 

In study 2, we confirm @morris2008logically's finding that exclusive interpretations of *or* are far more common than inclusive interpretations. However, we also show that the majority of these exclusive interpretations coincide with systematic indicators. Disjunctions that are accompanied by rise-fall intonation or inconsistent disjuncts are far more likely to be exclusive. Disjunctions that do no bear these features are more likely to be inclusive. Accounting for these external factors, a simple decision tree can rapidly learn to predict the exclusive interpretation of the disjunction. 

# Conclusion

List what you showed and argued for.

Talk about important implications for theories of word learning.

Possibly talk about the original tweet and how that falls still outside what your algorithm learns.

# Acknowledgements

Place acknowledgments (including funding information) in a section at
the end of the paper.

# References 

```{r}
# References will be generated automatically by Pandoc and included here.
# The following code is some latex to format the bibliography. Do not remove it.
```


```{r localImport, include=FALSE, eval=FALSE}
# read the file containing all the "and" and "or" tokens
connective_tokens <- read.csv("1_raw_data/connective_tokens.csv")
# Read the file on speaker statistics in Childes English corpora
speaker_stats <- read.csv("1_raw_data/speaker_stats.csv")

# Make the tokens case insensitive
connective_tokens$gloss %<>% tolower()

# add age in years to the tokens dataframe
connective_tokens$target_child_age_years <- 
  connective_tokens$target_child_age %>% 
  duration("days") %>% 
  as.numeric("years")

# Excluding data from children young than 1 and older than 7
connective_tokens %<>% filter(target_child_age_years < 6, target_child_age_years > 1)

# add age in years to the speaker dataframe
speaker_stats$target_child_age_years <- 
  speaker_stats$target_child_age %>% 
  duration("days") %>% 
  as.numeric("years")

# create a table of token frequency at different ages by different speakers
speaker_info <- 
  speaker_stats %>%
  group_by(speaker_role, target_child_age_years) %>%
  summarize(total_token = sum(num_tokens))
```

```{r connectiveByAgeSpeaker, include=FALSE, eval=FALSE}
connective_ByAgeSpeaker <-
  connective_tokens %>%
  group_by(target_child_age_years, speaker_role, gloss) %>%
  summarise(freq = n()) %>%
  full_join(speaker_info, by = c("target_child_age_years", "speaker_role")) %>%
  mutate(ppm = (freq / total_token) * 1000) %>%
  na.omit()
```

```{r questionDeclarative, include=FALSE, eval=FALSE}
connective_byUtteranceAgeRole <-
  connective_tokens %>%
  group_by(target_child_age_years, speaker_role, gloss, utterance_type) %>%
  summarise(freq = n()) %>%
  filter(utterance_type == "declarative" | utterance_type == "question")

# normalize by the total number of tokens provided by speakers
allTokens_byRoleAgeUtterance <-
  read.csv("1_raw_data/allTokens_byRoleAgeUtterance.csv") %>%
  select(target_child_age, freq_total, speaker_role, utterance_type) %>%
  filter(utterance_type == "declarative" | utterance_type == "question")

allTokens_byRoleAgeUtterance$target_child_age_years <- 
  allTokens_byRoleAgeUtterance$target_child_age %>% 
  duration("days") %>% 
  as.numeric("years")

connective_normalized <-
  full_join(connective_byUtteranceAgeRole, allTokens_byRoleAgeUtterance, 
            by = c("target_child_age_years", "speaker_role", "utterance_type")) %>%
  mutate(ppm = (freq / freq_total) * 1000)
```

\setlength{\parindent}{-0.1in} 
\setlength{\leftskip}{0.125in}
\noindent
