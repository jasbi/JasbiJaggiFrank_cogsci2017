---
title: "Conceptual and prosodic cues in child-directed speech can help children learn the meaning of disjunction"
bibliography: library.bib
csl: apa6.csl
document-params: "10pt, letterpaper"

author-information: > 
    \author{{\large \bf Masoud Jasbi} \\ \texttt{masoudj@stanford.edu} \\ Department of Linguistics \\ Stanford University
    \And {\large \bf Akshay Jaggi} \\ \texttt{ajaggi@stanford.edu} \\ Department of Linguistics \\ Stanford University
    \And {\large \bf Michael C. Frank} \\ \texttt{mcfrank@stanford.edu} \\ Department of Psychology \\ Stanford University
    }

abstract: 
    "At first glance, children's word learning appears to be mostly a problem of learning words like \"dog\" and \"run.\" However, it is small words like *and* and *or* that enable the construction of complex combinatorial language. How do children learn such function words? Using transcripts of parent-child interactions, we investigate the cues in child-directed speech that can inform the interpretation and acquisition of the connective *or*, which has a particularly challenging semantics. Study 1 finds that, despite its low overall frequency, children use *or* at adult levels by age 4 in some speech acts. Study 2 uses annotations of a subset of parent-child interactions to show that disjunctions in child-directed speech are accompanied by reliable cues to the correct interpretation (exclusive vs. inclusive). We present a decision-tree model that learns from a handful of annotated examples to correctly predict the interpretation of a disjuntion. These studies suggest that conceptual and prosodic cues in child-directed speech can provide information for the acquisition of functional categories like disjunction."

keywords:
    "language acquisition; word learning; function words; logical words; disjunction; conjunction."
    
output: cogsci2016::cogsci_paper
---

```{r global_options, include=FALSE}
rm(list=ls())
knitr::opts_chunk$set(fig.width=3, fig.height=3, fig.crop = F, fig.pos = "tb", fig.path='figs/',
                      echo=F, warning=F, cache=F, message=F, sanitize = T)
```

```{r, libraries}
library(png)
library(grid)
library(ggplot2)
library(xtable)
library(knitr)
library(childesr)
library(tidyverse)
library(ggthemes)
library(lubridate)
library(magrittr)
library(lme4)
library(lmerTest)
library(forcats)
library(bootstrap)
library(jpeg)
```

# Introduction

Word learning is the process of isolating a word form, selecting a meaning from a set of potential meanings, and mapping the word to the selected meaning [@clark1995lexicon]. For example, a father holding a baby may point to a squirrel and say "look at the squirrel!" The baby -- already familiar with the phrase "look at the" -- should recognize the novel word *squirrel*, consider some potential referents (e.g tree, squirrel, chair, etc.) and select the right referent using the available cues, in this case the father's pointing. While there has been a lot of research on cues that help children's acquisition of content words such as *squirrel*, *red*, and *run*, we know little about cues that can assist children in learning the meaning of function words such as *and*, *the*, *of*, and *or*. This is partly due to the nature of these two categories. Content words have thousands of members and their meanings are often concrete and tangible. Function words, however, have few members and refer to highly abstract meanings that hold content words together to form complete sentences and thoughts. These properties make function words challenging for theories of word learning. In this study, we investigate the cues that assist children's acquisition of function words by examining the disjunction word *or* in parent-child interactions. 

The word *or* has been a case study for linguistic semantics due to a seeming ambiguity between an inclusive and exclusive interpretation. In formal logics, there are two types of disjunction: inclusive and exclusive. An inclusive disjunction such as "A $\vee$ B" is true when either A, B, or both are true. An exclusive disjunction such as "A $\oplus$ B" is true only when A or B is true but not both. The linguistic connective *or* appears to be ambiguous between an inclusive interpretation like "A $\vee$ B" and an exclusive one like "A $\oplus$ B". For example, a waiter may ask if you would like something to eat or drink, not excluding the possibility that you would like both. However, the waiter may later ask if you would like to see the dessert menu or have the check, suggesting that you should choose one or the other, and not both. 

Closer examinations suggest that while the meaning of *or* itself is inclusive, the exclusive interpretation can be derived by ruling out the situation where both options are true via pragmatic reasoning, inconsistent options, or a rise-fall intonation. @grice1975logicconvo argued that upon hearing "A or B," we may exclude the possibility of both A and B being true simply because we reason that the speaker could have used the connective *and* instead of *or*. Therefore, the exclusive interpretation is the result of this pragmatic reasoning on the speaker's connective use. Following this line of reasoning, @geurts2006exclusive argued that in many cases, exclusive interpretations stem from the inconsistent meaning of the options themselves. For example, "to be or not to be" is exclusive simply because one cannot both be and not be! In an experimental study, @pruitt2013interpretation showed that in questions, exclusive interpretations are the result of a rise-fall intonation on the disjunction. These studies suggest that the exclusive interpretation of *or* is the result of modifying *or*'s underlyingly inclusive semantics by external factors.

```{r aorb, fig.env="figure", fig.pos="t", fig.width=1.3, fig.align = "center" , fig.cap="Inclusive disjunction (A$\\vee$B) is true in situations where A, B, or both AB are true. Exclusive disjunction (A$\\oplus$B) is true in situations where only A or only B is true."}
library(jpeg)
#AorB <- png::readPNG("figs/AorB.png")
AorB <- jpeg::readJPEG("figs/AorB.jpg")
grid::grid.raster(AorB)
```

How do children learn the inclusive semantics of *or*? One possibility is that inclusive interpretations dominate the examples of *or* children hear. @morris2008logically investigated instances of *and* and *or* in parents' and children's speech using 240 transcripts in the CHILDES database [@macwhinney2000childes]. He found that compared to *and*, *or* is extremely rare in child-directed speech and that children start to produce and subsequently reach the adult rate earlier for *and*. He also found that the majority of *or* examples children hear (75-80\%) and produce (90\%) have an exclusive interpretation. Based on these findings, he concluded that children's early meaning for *or* is exclusive disjunction and that they learn the inclusive meaning in later stages of development (possibly at age 6 or 7).

<!--Previous studies showed that the majority of *or* examples children hear receive an exclusive interpretation, yet in comprehension tasks they interpret *or* as inclusive disjunction.-->

Contrary to @morris2008logically's conclusion, a series of experimental studies found that children between the ages of 3 and 5 interpret *or* as inclusive disjunction [@chierchia2001acquisition; @crain2012emergence; @jasbi2016cogsci]. Given @morris2008logically's finding that the majority of *or* examples children hear are exclusive, how can children learn to interpret *or* as inclusive? @crain2012emergence considered it unlikely that children learn the meaning of *or* from the examples they hear. Instead, he argued that children rely on an innate knowledge that the meaning of a disjunction word is inclusive. In other words, upon hearing a connective word, children consider inclusive disjunction (A $\vee$ B) as a viable candidate for the meaning, not exclusive disjunction (A $\oplus$ B).

Here we present two studies investigating the role of input in children's acquisition of disjunction. In study 1, we use a larger corpus (9,097 transcripts in CHILDES) than that of @morris2008logically to investigate the frequencies of *and* and *or* in parent-child interactions. We find that when we consider the speech acts they are most used for, both *and* and *or* appear relatively early in children's speech and reach the adult rate of production at or by the age 4. In study 2, we conduct an annotation study to check the frequencies of *or*'s exlusive and inclusive interpretations as well as conceptual and prosodic cues that accompany it. We replicate @morris2008logically's finding that the majority of *or* examples in child-directed speech have an exclusive interpretation. However, we also show that these exclusive interpretations correlate systematically with conceptual and prosodic cues. Exclusive interpretations are either conceptually inconsistent or carry a distinct rise-fall intonation. We show that setting aside these cases, the interpretation of a disjunction is most often inclusive. We build a learning model that uses intonation and conceptual consistency to predict the interpretation of a disjunction with high accuracy even given relatively few examples. These results suggest that children can rely on cues present in child-directed speech to tease apart the exclusive vs. inclusive interpretation of disjunction and map the meaning of *or* accordingly.

# Study 1: Corpus Study

```{r, dataWrangling, eval=FALSE, include=FALSE}
# This chunk uses the childesr package to import all English words from childes-db and create the processed files "raw_normalized" and "bySpeechAct_normalized"
# Since the file is too big, we only store two dataframes on github that are the results of running this chunk of code

# Import all words from childes-db
english_tokens <- get_tokens(collection = c("Eng-NA","Eng-UK"), 
                          corpus = NULL, 
                          role = c("target_child","Mother", "Father"),
                          age = NULL, 
                          sex = NULL, 
                          child = NULL,
                          token = "*")

# remove the xxx (unintelligible) tokens
english_tokens %<>% filter(gloss!="xxx")

# remove NAs in speaker_role, target_child_age, or gloss
english_tokens <- english_tokens %>% drop_na(speaker_role, target_child_age, gloss)

#Convert and store children's age in years using the lubridate package
english_tokens$target_child_age_years <- 
  english_tokens$target_child_age %>% 
  duration("days") %>% 
  as.numeric("years")

#Take out data for the age range below 1 and above 6 years, this is because there is not much data in that range
english_tokens %<>% filter(target_child_age_years < 6, target_child_age_years > 1)

# Prepare the speech_act categories for this study based on the utterance_types in childes-db
# Categories: declarative, impertaive, question, and other
english_tokens$speech_act <-
  recode(english_tokens$utterance_type, 
         `broken for coding`="other",
          `imperative_emphatic` = "imperative",
         interruption = "other",
         `interruption question` = "question",
         `missing CA terminator` = "other",
         `no break TCU continuation` = "other",
         `question exclamation` = "question",
         `quotation next line` = "other",
         `quotation precedes` = "other",
         `self interruption` = "other",
         `self interruption question` = "question",
         `trail off` = "other",
         `trail off question` = "question"
         )

#####################################################################
## Now we're going to process the English words we have in "english_tokens" in two ways

######## 1. Just count all the instances of "and" and "or" and normalize them by the total number of words a speaker has said at a particular age (of the child)

# Group the tokens (words) by speaker role and the age of the child, count how many words for each speaker at each age
rawOverall_stats <-
  english_tokens %>%
  group_by(speaker_role, target_child_age_years) %>%
  summarize(total_freq = n())

# Group connective tokens by speaker and age of the child. count how many connective for each speaker at each age
rawConnective_stats <-
  english_tokens %>%
  filter(gloss=="and" | gloss=="or") %>%
  group_by(speaker_role, target_child_age_years, gloss) %>%
  summarize(freq = n())

# Normalize the connective count by dividing the connective frequency by the total word frequency for each speaker at each age
rawNormalized_stats <-
  full_join(rawConnective_stats, rawOverall_stats, by=c("speaker_role", "target_child_age_years")) %>%
  mutate(relFreq = freq / total_freq, relFreq_ppt = relFreq * 1000)

########## 2. Count all the instaces of "and" and "or" in DIFFERENT SPEECH ACTS and normalize them by THE TOTAL NUMBER OF WORDS IN SPEECH ACTS for each speaker at a particular age

#group the tokesn by speaker, age, and speech act, then count them
overall_stats <-
  english_tokens %>%
  group_by(speaker_role, speech_act, target_child_age_years) %>%
  summarize(total_freq = n())

# only take out "and" and "or"s, group them by speaker, age of the child, and speech act, count them
connective_stats <-
  english_tokens %>%
  filter(gloss=="and" | gloss=="or") %>%
  group_by(speech_act, speaker_role, target_child_age_years, gloss) %>%
  summarize(freq = n())

# now join the previous data frames together, divide the number of tokens in each group by the total number of words in that group
normalized_stats <-
  full_join(connective_stats, overall_stats, by=c("speech_act", "speaker_role", "target_child_age_years")) %>%
  mutate(relFreq = freq / total_freq, relFreq_ppt = relFreq * 1000)

########## Store both dataframes to be called later
write.csv(rawNormalized_stats, "2_processed_data/raw_normalized.csv")
write.csv(normalized_stats, "2_processed_data/bySpeechAct_normalized.csv")
```

```{r importProcessedData}
rawNormalized <- read.csv("2_processed_data/raw_normalized.csv")
bySpeechAct_normalized <- read.csv("2_processed_data/bySpeechAct_normalized.csv")
utteranceType_bySpeaker <- read.csv("2_processed_data/utteranceType_bySpeaker.csv")
relFerq_bySpeakerSpeechAct <- read.csv("2_processed_data/relFerq_bySpeakerSpeechAct.csv")
freqTable_bySpeechAct <- read.csv("2_processed_data/frequency_bySpeechAct.csv")
freqTable_bySpeakerSpeechAct <- read.csv("2_processed_data/frequency_bySpeakerSpeechAct.csv")
```

First, we conducted an exploratory investigation of *and* and *or* productions in parents' and children's speech. The goal of the study was to find out when children start producing these words and when they reach the adult rate of production.

## Methods

We accessed the Child Language Data Exchange System ([CHILDES](https://childes.talkbank.org/), @macwhinney2000childes) via the online platform [childes-db](http://childes-db.stanford.edu/) and its associated R package [@childesdb]. We extracted all instances of *and* and *or* in the English corpora (ENG-NA and ENG-UK), with information on the child's age at the time of the utterance as well as the utterance type. Utterances were coded as "declarative", "question", "imperative", or "other" according to [the CHILDES CHAT trascription format](https://talkbank.org/manuals/CHAT.html#_Toc486414422). Since utterance types "imperatives" and "other" constituted a very small portion of utterances, we did not include them in our analysis. In our analysis, we used utterance type as a proxy for speech acts [@austin1975things]. We limited our analysis to the data between the ages 1 and 6 because there was limited data outside this age range. We computed the relative frequency of connective production by dividing the total number of *and* and *or* tokens in the speech of fathers, mothers, and children at a particular age by the total number of words spoken at that age. We present the relative frequency as parts per thousand.

```{r OverallConnectivePlots, fig.env="figure", fig.asp=0.7, fig.width=3.3, fig.show="hold", fig.pos="t", fig.cap= "The relative frequency of AND (top) and OR (bottom) per thousand words in the speech of fathers, mothers, and children between the ages of 1 and 6."}
rawNormalized %>%
  filter(gloss=="and") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape = speaker_role, color=speaker_role)) +
  geom_point(aes(), size=0.6) +
#  facet_grid(gloss, scales="free_y") +
  scale_y_continuous(limits = c(0, 75)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "", y="ANDs Per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) +
  theme_few() +
  theme(legend.position=c(0.9, 0.8), text = element_text(size=9)) + 
  guides(shape=guide_legend(title=NULL), color=guide_legend(title=NULL))

rawNormalized %>%
  filter(gloss=="or") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape = speaker_role, color=speaker_role)) +
  geom_point(aes(), size=0.6) +
#  facet_grid(speech_act~gloss, scales="free_y") +
  scale_y_continuous(limits = c(0, 8)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "Child's Age (years)", y="ORs per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(legend.position=c(0.9, 0.8), text = element_text(size=9))+ 
  guides(shape=FALSE, color=FALSE)
```

## Results

```{r byspeechActPlots, fig.env="figure*", fig.asp=1.2, fig.width=3.3, fig.show="hold", fig.pos="t", set.cap.width=T, num.cols.cap=2, fig.align="center", fig.cap= "The relative frequency of AND (left) and OR (right) per thousand words in declaratives and questions in the speech of fathers (Light Green), mothers (Dark Green), and children (Blue) between the ages of 1 and 6."}
bySpeechAct_normalized %>%
  filter(speech_act == "declarative" | speech_act == "question", gloss=="and") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape=speaker_role, color = speaker_role)) +
  geom_point(aes(color=speaker_role), size=0.6) +
  facet_grid(speech_act~gloss, scales="free_y") +
  scale_y_continuous(limits = c(0, 60)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "Age (years)", y="Per thousand words") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(text = element_text(size=9), strip.text.y = element_blank()) + 
  guides(shape=FALSE, color=FALSE)

bySpeechAct_normalized %>%
  filter(gloss=="or", speech_act == "declarative" | speech_act == "question") %>%
  ggplot(aes(target_child_age_years, relFreq_ppt, shape=speaker_role, color = speaker_role)) +
  geom_point(aes(color=speaker_role), size=0.6) +
  facet_grid(speech_act~gloss, scales="free_y") +
  scale_y_continuous(limits = c(0,7)) +
  scale_x_continuous(breaks=seq(1,6)) +
  labs(x = "Age (years)", y="") +
  geom_smooth(aes(group = speaker_role, color=speaker_role), span=0.9) +
  scale_color_manual(values = c("seagreen3","seagreen", "darkblue")) + 
  theme_few() +
  theme(text = element_text(size=9)) +
  guides(shape=FALSE, color=FALSE)
```

In Figure \ref{fig:OverallConnectivePlots}, we show the relative frequencies of *and* and *or* in the speech of parents and children between the ages of 1 and 6 years. In the speech of parents, *and* is produced around 20 times per thousand words while *or* is only produced around 2 times per thousand words. This result confirms previous findings that *or* is much less frequent in child directed speech than a similar function word such as *and*.

```{r utterance_types, }
speechAct_pct <-
  utteranceType_bySpeaker %>%
  group_by(speech_act) %>%
  summarize(utterance_pct = sum(utterance_count)/sum(total_utterance_count)*100)

connective_pct <-
  freqTable_bySpeechAct %>%
  filter(speech_act!="other", speech_act!="imperative", word!="other")

connective_ppt <-
  freqTable_bySpeakerSpeechAct %>%
  group_by(word,speech_act) %>%
  summarize(counts = sum(count), total = sum(total), rel_freq = counts/total, ppt = rel_freq*1000) %>%
  filter(word!="other", speech_act!="other", speech_act!="imperative")
```

*and* and *or* seem to show different developmental trajectories in the speech of children. For *and*, there is a rapid increase in its production between the ages of 1.5 and 3. It reaches the adult rate around the age 3 and stays at that level afterwards. For *or*, on the other hand, we see a slow increase from age 2, getting close to the adult rate only at age 6. This difference in the development of *and* & *or* production is similar to the developmental trends reported by @morris2008logically. However, the analysis above does not control for the role of speech act (e.g. questions and declaratives) in the frequency of function words. While content words such as *dog* or *chair* may appear freely in different types of speech acts, function words can be constrained by the type of speech acts they can appear in. *and* is more frequent in declaratives (`r round(connective_pct$connective_pct[1])`%) while *or* has similar frequencies in declaratives and questions (`r round(connective_pct$connective_pct[3])`% vs. `r round(connective_pct$connective_pct[4])`%). In addition, declaratives are more frequent than questions overall (`r round(speechAct_pct$utterance_pct[1])`% vs. `r round(speechAct_pct$utterance_pct[4])`%). Thus, these base-rate differences may mask different developmental trajectories.

We therefore computed the relative frequency of *and*/*or* across questions and declaratives separately. Relative frequency is computed as $freq(target) / total-tokens$, where both are computed within the utterances of a particular speaker (father, mother, child) in a particular speech act (questions, declaratives). Overall, we found that the relative frequency of *and* is higher in declaratives than in questions (`r round(connective_ppt$ppt[1],2)` vs. `r round(connective_ppt$ppt[2],2)` words per thousand). The relative frequency of *or*, however, is higher in questions (`r round(connective_ppt$ppt[3],2)` vs. `r round(connective_ppt$ppt[4],2)` words per thousand). Figure \ref{fig:byspeechActPlots} shows the developmental trend of these relative frequencies, split by speech act. 

Within this analysis, *and* appears to be produced at adult levels by around age 3 in declaratives, its modal speech act. And *or* appears to be produced at relatively adult-like levels by around 4 in questions, its modal speech act. In contrast, in declaratives, which are more frequent overall, *or* frequency is below adult rates throughout, perhaps due to its use in complex, multi-clausal sentences, which are less frequent for children of all ages than for adults. In sum,  children's overall lower-frequency use of *or* may mask earlier competence in producing *or* in questions. 

# Study 2: Annotation Study

Study 1 showed that even though *or* is not very frequent in child-directed speech, children learn and produce it in questions and reach the adult rate of production around the age 4. In study 2, we conducted an annotation study of *or* productions in child-directed speech. The goal of this study was to discover features of child-directed speech that may help the acquisition of *or*'s meaning from infrequent data.

```{r warmup, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(ggthemes)
library(bootstrap)
library(forcats)
library (irr)
library(caret)
library(lme4)
library(lmerTest)
library(knitr)
library(ggplot2)

## for bootstrapping 95% confidence intervals
theta <- function(x,xdata) {mean(xdata[x])}
ci.low <- function(x) {
  quantile(bootstrap(1:length(x),1000,theta,x)$thetastar,.025)}
ci.high <- function(x) {
  quantile(bootstrap(1:length(x),1000,theta,x)$thetastar,.975)}
```

```{r data_prep, echo=FALSE, warning=FALSE, message=FALSE}
alex_data <- read.csv("1_raw_data/ProvidenceData-alex.csv", nrows=100)
lily_data <- read.csv("1_raw_data/ProvidenceData-lily.csv", nrows=99)
vio_data <- read.csv("1_raw_data/ProvidenceData-vio.csv", nrows=102)
will_data <- read.csv("1_raw_data/ProvidenceData-will.csv", nrows=100)
naima_data <- read.csv("1_raw_data/ProvidenceOR-Naima.csv", nrows=241)

naima_data <- 
  naima_data %>%
  filter(!is.na(exclusivity), !is.na(intonation))

all_data <- rbind(alex_data, lily_data, vio_data, will_data, naima_data)

all_data$intonation <- as.factor(all_data$intonation)

all_data$exclusion <- fct_recode(all_data$exclusion, "Consistent" = "ELS", "Inconsistent" = "EXC")
all_data$intonation <- fct_recode(all_data$intonation, "Flat" = "0", "Rising" = "1", "Rise-Fall" = "2")
all_data$intonation <- fct_recode(all_data$intonation, "Flat" = "0", "Rising" = "1", "Rise-Fall" = "2")

```

## Methods 

We accessed [the Providence corpus](https://phonbank.talkbank.org/browser/index.php?url=Eng-NA/Providence/) [@demuth2006word] via the phonbank section of [the TalkBank system](https://talkbank.org/). We extracted all instances of *or* along with the two utterances before and after to provide context using [the CLAN software](http://alpha.talkbank.org/clan/). We annotated the examples for three major categories: disjunction interpretation, intonation, and conceptual consistency. Table 1 shows these categories along with their subcategories and an example for each subcategory. 

### Disjunction Interpretation
This category was our dependent measure. Annotators listened to a disjunction like "A or B" and decided whether the speaker intended to imply "not both A and B" (exclusive) or "possibly both A and B" (inclusive).

### Intonation 
For this category annotators listened to the utterances containing disjunction and decided whether the intonation contour on the disjunction is rise-fall, rise, or flat. Table 1 includes examples that are prototypically read aloud with the intonation contour they are subcategorized as. 

### Consistency
For conceptual consistency, annotators decided whether the propositions that make up the disjunction are inconsistent. Our annotators used the following diagnostic to decide the consistency of the disjuncts: Two disjuncts were marked as inconsistent if replacing the word *or* with *and* produced a contradiction. For example, changing "the ball is in my room and your room" to "the ball is in my room and your room" produces a contradiction because the propositions cannot be both true at the same time. 

It is important to note here that this criterion is quite strict. In many cases, the possibility of both propositions being true is ruled out based on prior knowledge and expectations of the situation. For example, when asking people whether they would like tea or coffee, it is often assumed and expected that people choose one or the other. However, wanting to drink both tea and coffee is not conceptually inconsistent. It is just very unlikely. Our annotations of consistency are very conservative in that they consider such unlikely cases as consistent. In future research, relaxing this definition to allow for exclusion based on prior expectations may allow us to capture more exclsuive interpretations of disjunction.

```{r annotatuin_table, results="asis"}
annotation_categories <- data.frame(
  Category = c("Interpretation", "", "Intonation", "", "", "Consistency", ""),
  Subcategory = c("Exclusive", "Inclusive", "Flat", "Rise", "Rise-Fall", "Consistent", "Inconsistent"),
  Examples = c("Wanna stay or go?", "Anything to eat or drink?", "I'll get tea or coffee.", "Anything to eat or drink?", "Wanna stay or go?", "I'll get tea or coffee.", "Wanna stay or go?")
)

annotation_table <- xtable::xtable(annotation_categories, 
                      caption = "Annotation categories and examples.")

print(annotation_table, type="latex", comment = F, table.placement = "t", include.rownames=FALSE, hline.after = c(0,2,5))
```

Finally, to test inter-rater reliability, the two raters annotated the same 240 utterances. The inter-rater reliability was calculated over 8 iterations of 30 examples each. Training only completed after 3 consecutive iterations had substantial agreement between the raters (Cohen's $\kappa > 0.7$) for all categories.

```{r data_wrangling, echo=FALSE, warning=FALSE, message=FALSE}
raw_data <- 
  all_data %>%
  group_by(id, exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = IN + EX) %>%
  gather(EXIN, counts, EX:IN) %>%
  mutate(prop = counts / total) %>%
  group_by(EXIN) %>%
  summarize(cih = ci.high(prop),
            cil = ci.low(prop),
            prop = mean(prop))

graph_data <- 
  all_data %>%
  group_by(id, intonation, exclusion, exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = EX + IN) %>%
  gather(exclusivity, counts, EX:IN) %>%
  mutate(prop = counts / total) %>%
  group_by(exclusivity, intonation, exclusion) %>%
  summarize(cih = ci.high(prop),
            cil = ci.low(prop),
            prop = mean(prop)) 

counts_table<-  
  all_data %>%
  group_by(intonation, exclusion, syn_level, exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = IN + EX)

exclusivity_overall <-
  all_data %>%
  group_by(exclusivity) %>%
  summarise(counts= n()) %>%
  spread(exclusivity, counts) %>%
  replace(is.na(.), 0) %>%
  mutate(total = IN + EX) %>%
  gather(exclusivity, counts, EX:IN) %>%
  mutate(prop = counts / total)

cds_disjunction_model <- summary(glmer(exclusivity ~ intonation + exclusion + (1|id), family="binomial", data=all_data))
```


```{r interpretation, fig.env='figure',fig.width=2, fig.height=2, fig.show='hold', fig.pos="b", set.cap.width=T, num.cols.cap=2, fig.align="center",fig.cap = "Proportion of exclusive and inclusive interpretations of disjunction in child-directed speech. Error bars represent bootstrapped 95\\% confidence intervals"}
ggplot(raw_data, aes(x= EXIN, y=prop, fill=EXIN)) + 
  theme_few(base_size = 10) + 
  geom_col(width=0.7) +
  geom_linerange(aes(ymax = cih, ymin = cil)) + 
  guides(fill=FALSE) +
  labs(title = "", x = "", y = "") + 
  scale_colour_solarized()
```
 
## Results 

```{r interpretationByIntonationAndConsistency, fig.env='figure*',fig.pos='t',fig.width=4.2, fig.height=3, fig.align="center",fig.show='hold',set.cap.width=T, num.cols.cap=2, fig.cap = "Distribution of exclusive and inclusive interpretations broken down by intonation (flat, rise, rise-fall) and consistency. Error bars represent bootstrapped 95\\% confidence intervals"}
ggplot(graph_data, aes(x= exclusivity, y=prop, fill=exclusivity)) + 
  geom_col(width=0.7) +
  geom_linerange(aes(ymax = cih, ymin = cil)) +
  guides(fill=FALSE) +
  theme_few(base_size = 10) + 
  labs(title = "", x = "", y = "") + 
  scale_colour_solarized() + facet_grid(exclusion~intonation)
```

First, similar to Morris (2008), we found that the majority of *or* examples in CDS receive an exclusive interpretation ($\sim$%`r 100 * round(exclusivity_overall$prop[1],2)`). Figure \ref{fig:interpretation} shows this difference in distribution. However, the rate of exclusive interpretations change systematically when we break the data down by intonation and consistency (Figure \ref{fig:interpretationByIntonationAndConsistency}). Given a rise-fall intonation contour, a disjunction is almost always interpreted as exclusive. Similarly, if the propositions are inconsistent, the disjunction is most likely interpreted as exclusive. When either of these two features are absent, a disjunction is more likely to receive an inclusive interpretation.

A mixed-effects binomial logistic regression using the package \{lme4\} [@bates2014lme4] in R with the fixed effects of intonation and consistency, as well as the random effects for children, found both intonation and consistency significant in interpreting disjunctions (exclusivity $\sim$ intonation + consistency + (1|id)). Disjunctions were more likely to be interpreted as exclusive if they received a rise-fall intonation ($\beta$=`r round(cds_disjunction_model$coefficients[3],2)`, $z$=`r round(cds_disjunction_model$coefficients[11],2)`, $p < 0.001$) or if they were inconsistent ($\beta$=`r round(cds_disjunction_model$coefficients[4],2)`, $z$=`r round(cds_disjunction_model$coefficients[12],2)`, $p < 0.001$). Disjunctions were more likely to be interpreted as inclusive if they were consistent and received a rising ($\beta$=`r round(cds_disjunction_model$coefficients[2],2)`, $z$=`r round(cds_disjunction_model$coefficients[10],2)`, $p < 0.001$) or flat intonation ($\beta$=`r round(cds_disjunction_model$coefficients[1],2)`, $z$=`r round(cds_disjunction_model$coefficients[9],2)`, $p < 0.001$).

```{r treeDiagram, fig.env = "figure", fig.align='center', fig.width=3, fig.height=2,fig.cap="Optimal decision tree training on 100 datapoints. Provides series of two binary decisions to decide exlcusivity interpretation. Intonation $>$ 1.5 are rise-fall while intonation $<$ 1.5 are flat or rising. Consistency $>$ 0.5 are consistent while consistency $<$ 0.5 are  inconsistent."}

treeDiagram <- png::readPNG('figs/treeDiagram.png')
grid::grid.raster(treeDiagram)
```

###Classification Model 
The preceding analysis suggests that intonation and consistency are related to the interpretation of disjunction. To investigate how informative these patterns were more quantitatively, we built a model to predict the interpretation of a disjunction after training on examples annotated for intonation and consistency. For ease of interpretation of the rules governing exclusivity, we fit a decision tree model using Sci-kit Learn's Decision Tree Module [@pedregosa2011scikit]. We randomly sampled 100 examples for training and 300 examples for testing. Averaged over 100 trials, the average accuracy of a binary tree was 83%. More remarkably, the tree achieved an average of 80% accuracy after training on only 20 examples (Figure \ref{fig:learningCurve}). The control flow of the average decision tree on a single example is as follows. If *or* has neither rise-fall nor inconsistent disjuncts, it is marked inclusive. Otherwise, exclusive (Figure \ref{fig:treeDiagram}). The success of such a simple tree indicates that children could use a simple model to rapidly learn the exclusive interpretation of *or* from little data. 

```{r learningCurve, fig.env="figure", fig.align="center", fig.width=3, fig.height=3, fig.cap="Decision Tree Accuracy as a function of number of examples seen. Tested on a constant 300 examples. Dashed line marks 80\\% accuracy threshold."}
learning_curve <- png::readPNG('figs/learning_curve.png')
grid::grid.raster(learning_curve)
```

## Summary 

In study 2, we confirm @morris2008logically's finding that exclusive interpretations of *or* are far more common than inclusive interpretations. However, we also show that the majority of these exclusive interpretations coincide with systematic indicators. Disjunctions that are accompanied by rise-fall intonation or inconsistent disjuncts are far more likely to be exclusive. Disjunctions that do not bear these features are more likely to be inclusive. Accounting for these external factors, a simple decision tree can rapidly learn to predict the exclusive interpretation of the disjunction. 

# General Discussion

We addressed two puzzles in children's acquisition of disjunction. First, previous comprehension and production studies provided different accounts for the acquisition of *and* and *or*. Comprehension studies suggested that children learn the meaning of both *and* and *or* early and show an adult-like understanding of them by the age 4. However, production studies suggested that *and* reaches the adult rate of production by the age 3 while *or* does not reach the adult level even at age 5. Study 1 showed that when we control for the speech acts that these connectives are most used for, we observe that both *and* and *or* appear to increase in prevalence somewhat earlier than in previous studies and come relatively close to adult levels at or before age 4. This observation unifies the picture from comprehension and production studies: Children's acquisition of *and*/*or* appears to take place between the ages of 2 and 4.

The second puzzle that this paper addressed was the problem of learning an inclusive semantics for *or* from the majority exclusive instances in children's input. Previous studies showed that most *or* examples children hear receive an exclusive interpretation, yet in comprehension tasks they interpret *or* as inclusive. We suggest that other independent cues in the input may allow children to solve this problem. In Study 2, we replicated the pattern that most interpretations of *or* were exclusive. But most of these exclusive interpretations were either constituted of two conceptually inconsistent disjuncts or accompanied by a distinctive rise-fall intonation. Disjunctions that did not show either of these two cues were typically inclusive. If children track these cues, then they could tease apart the semantic contribution of *or* from the interpretive contribution of the cues that accompany it. 

We implemented this cue-based account in a decision-tree model, which learned to predict the interpretation of a disjunction with high accuracy after observing only a few examples. This model describes the statistical properties of the data available to children, rather than describing their learning process. Nevertheless, the sucess of this model suggests that the systematicity of children's linguistic input might allow them to decide correctly between exclusive and inclusive semantics for disjunction. Such a learning account would obviate the need for a principle that directly blocks exclusive disjunction as a possible connective meaning. *or* may not be assigned an exclusive meaning simply because such a mapping is not supported by the language input children hear.

The findings here do not bear on other components of the logical nativist account. A learning account still needs to address whether candidate semantic representations -- inclusive and exclusive *or*, as well as candidates for other connectives -- are innate or discovered during development. Moreover, while conceptual consistency is likely a reliable cue crosslinguically, intonation may be a more language-dependent cue and should be investigated further. Other pragmatic and contextual effects that we did not examine might also bear on children's interpretation of disjunction, and we expect that exclusive interpretations not captured by our model might be captured by these factors.

Form-meaning mapping in child language acquisition is often construed as the task of associating a novel, isolated form such as *gavagai* to a well-delimited concept such as rabbit. The case of disjunction is more complicated. *or* cannot be isolated from either the conceptual properties of the words and phrases that it combines with or the prosodic contour of the utterance as a whole. Learning *or* and other function words requires a fuller consideration of the formal and conceptual contexts in which they occur; our models must take these into account. 

\vspace{1em} \fbox{\parbox[b][][c]{7.3cm}{\centering The data and code for this paper are available at\ \url{https://github.com/jasbi/JasbiJaggiFrank_cogsci2018}}} \vspace{1em}

# Acknowledgements

We would like to thank Eve V. Clark for her comments and guidance with this project. We would also like to thank Kutay Serova and Salma Sebt. This work was supported by NSF grant #1456077, a Jacobs Foundation Fellowship to MCF, and the Stanford Graduate Fellowship.

# References 

```{r}
# References will be generated automatically by Pandoc and included here.
# The following code is some latex to format the bibliography. Do not remove it.
```

\setlength{\parindent}{-0.1in} 
\setlength{\leftskip}{0.125in}
\noindent
